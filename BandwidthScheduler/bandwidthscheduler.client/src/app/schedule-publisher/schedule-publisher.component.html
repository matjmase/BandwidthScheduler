<h3>Publish Schedule</h3>
<mat-divider class="divider-spacer"></mat-divider>
<div style="text-align: center">
  <form #schedulingForm="ngForm" (ngSubmit)="Submit(schedulingForm)">
    <div>
      <mat-form-field>
        <mat-label>Choose a date</mat-label>
        <input
          id="date"
          name="date"
          required
          ngModel
          matInput
          [matDatepicker]="datepicker"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle
          matIconSuffix
          [for]="datepicker"
        ></mat-datepicker-toggle>
        <mat-datepicker #datepicker>
          <mat-datepicker-actions>
            <button mat-button matDatepickerCancel>Cancel</button>
            <button mat-raised-button color="primary" matDatepickerApply>
              Apply
            </button>
          </mat-datepicker-actions>
        </mat-datepicker>
      </mat-form-field>
      <mat-form-field class="example-full-width">
        <mat-label>Max Employees</mat-label>
        <mat-icon matPrefix>numbers</mat-icon>
        <input
          id="maxEmployees"
          name="maxEmployees"
          type="number"
          max="20"
          min="1"
          matInput
          required
          ngModel
        />
        <mat-hint>Max 20</mat-hint>
      </mat-form-field>
    </div>

    <button
      mat-stroked-button
      color="primary"
      type="submit"
      [disabled]="!schedulingForm.valid"
    >
      Render
    </button>
  </form>

  <div>
    <mat-divider class="divider-spacer"></mat-divider>

    <div style="display: flex; flex-direction: row; overflow-x: auto">
      <div
        style="display: flex; flex-direction: column"
        *ngFor="let timeFrame of TimeFrames"
      >
        <mat-card style="padding: 1rem">
          {{ timeFrame.StartTime | date : "hh:mm aa" }}
        </mat-card>

        <div *ngFor="let levelItem of timeFrame.Level.reverse(); let i = index">
          <div
            class="card-clickable"
            [ngClass]="{
              'card-clickable-hovered': levelItem === 1,
              'card-clickable-selected': levelItem === 2
            }"
            (mouseenter)="
              timeFrame.SetLevelHover(timeFrame.Level.length - 1 - i)
            "
            (mouseleave)="timeFrame.SetLevelLeave()"
            (mousedown)="
              timeFrame.SetLevelSelect(timeFrame.Level.length - 1 - i)
            "
          >
            &nbsp;
          </div>
        </div>
      </div>
    </div>

    <div style="display: flex; flex-direction: row; margin-top: 2rem">
      <div style="flex-grow: 1">
        <button mat-stroked-button color="primary" (click)="GenerateProposal()">
          Calculate
        </button>
      </div>
      <div style="flex-grow: 1">
        <button mat-stroked-button color="accent" (click)="ClearSelection()">
          Clear
        </button>
      </div>
    </div>

    <mat-divider class="divider-spacer"></mat-divider>

    <div style="text-align: left">
      <mat-list style="margin: 1rem">
        <h3>Legend</h3>
        <mat-list-item>
          <div style="display: flex; flex-direction: row; align-items: center">
            <div
              style.background-color="rgb({{ ColoredFramesClear.R }}, {{
                ColoredFramesClear.G
              }}, {{ ColoredFramesClear.B }})"
              style="
                border-radius: 100%;
                height: 1rem;
                width: 1rem;
                margin: 0.5rem;
                display: inline-block;
                border: 0.5px solid black;
              "
            >
              &nbsp;
            </div>
            <span>Clear</span>
          </div></mat-list-item
        >

        <mat-list-item>
          <div style="display: flex; flex-direction: row; align-items: center">
            <div
              style.background-color="rgb({{ ColoredFramesDeficit.R }}, {{
                ColoredFramesDeficit.G
              }}, {{ ColoredFramesDeficit.B }})"
              style="
                border-radius: 100%;
                height: 1rem;
                width: 1rem;
                margin: 0.5rem;
                display: inline-block;
                border: 0.5px solid black;
              "
            >
              &nbsp;
            </div>
            <span>Shortage</span>
          </div></mat-list-item
        >

        <mat-list-item *ngFor="let kv of ColorDict | keyvalue">
          <div style="display: flex; flex-direction: row; align-items: center">
            <div
              style.background-color="rgb({{ kv.value.R }}, {{ kv.value.G }}, {{
                kv.value.B
              }})"
              style="
                border-radius: 100%;
                height: 1rem;
                width: 1rem;
                margin: 0.5rem;
                display: inline-block;
                border: 0.5px solid black;
              "
            >
              &nbsp;
            </div>
            <span>{{ kv.key }}</span>
          </div></mat-list-item
        >
      </mat-list>
    </div>

    <div style="display: flex; flex-direction: row; overflow-x: auto">
      <div
        style="display: flex; flex-direction: column"
        *ngFor="let coloredFrame of ColoredFrames"
      >
        <mat-card style="padding: 1rem">
          {{ coloredFrame.StartTime | date : "hh:mm aa" }}
        </mat-card>

        <div *ngFor="let color of coloredFrame.Color.reverse(); let i = index">
          <div
            class="card-clickable"
            style.background-color="rgb({{ color.R }}, {{ color.G }}, {{
              color.B
            }})"
          >
            &nbsp;
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div></div>
